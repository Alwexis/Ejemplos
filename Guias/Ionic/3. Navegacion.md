### ‚¨ÖÔ∏è **Parte anterior de la Gu√≠a**: **[Formularios üìã](https://github.com/Alwexis/Utilidades/blob/main/Guias/Ionic/3.%20Navegacion.md)**

----

<h1 align="center">üö£ Navegaci√≥n</h1>

La navegaci√≥n en Ionic se puede hacer de muchas formas... Utilizando el atributo `routerLink="pagina"` dentro de un elemento, o utilizando el t√≠pico `href=""`/`window.href=""`. Pero en esta ocasi√≥n, haremos uso de los componentes `Router`, `ActivatedRouter` y `NavigationExtras`; siendo estos √∫ltimos para pasar datos entre p√°ginas üò∫

&nbsp;

Continuaremos con lo que dejamos en la parte anterior de la gu√≠a. Vamos a pasar los datos de nuestro Formulario Login, a nuestra p√°gina Home, y para hacerlo a√∫n m√°s interesante, vamos a mostrar los datos üò∏

&nbsp;

----

<h2 align="center">‚úèÔ∏è Implementando los Componentes</h2>

Para empezar, tenemos que ir a nuestro archivo `login.page.ts` e importaremos los componentes anterior mencionados, con la siguiente l√≠nea de c√≥digo:

`import { ActivatedRoute, NavigationExtras, Router } from '@angular/router';`

Y posterior a esto, los referenciamos como par√°metros en nuestro constructor, qued√°ndonos as√≠:

```typescript
constructor(private _activatedRoute: ActivatedRoute, private _navExtras: NavigationExtras,
private _router: Router) { }
```

Ya haciendo esto, podemos escribir nuestro c√≥digo para la navegaci√≥n entre p√°ginas üò∫

----

<h2 id="enviar_datos_navegar" align="center">üì§ Navegar y enviar datos</h2>

Lo primero que haremos, ser√° definir nuestra funci√≥n dentro de nuestro archivo `login.page.ts`, despu√©s del constructor para continuar con las buenas practicas.

En mi caso, se llamar√° `navigateTo(pagina: string)`

<details>
    <summary><b><u>‚ö†Ô∏è Informaci√≥n</u></b></summary>
	<p>Aquel <code>pagina: string</code> dentro de la funci√≥n es un par√°metro que utilizaremos para referenciar a la p√°gina la cual queremos ir.</p>
</details>

Luego utilizaremos la funci√≥n `navigate` del componente `Router`, de la siguiente forma: <b>`this._router.navigate(['home'])`</b>. Con lo que nuestra funci√≥n quedar√≠a tal que as√≠:

```typescript
navigateTo(pagina: string) {
    this._router.navigate([pagina]);
}
```

Y con eso estar√≠amos navegando hacia otra p√°gina, pero... Lo que nosotros queremos ahora mismo es pasar datos dentro de esta navegaci√≥n, y es aqu√≠ donde entra en juego el componente `NavigationExtras` y su atributo `state`. A continuaci√≥n, dentro de nuestra misma funci√≥n y antes del √∫ltimo c√≥digo el cual nos permite navegar, declararemos una variable de tipo `NavigationExtras`, y le asignaremos a su atributo `state` nuestro usuario üò∫

Nuestra funci√≥n quedar√≠a ahora as√≠:

```typescript
navigateTo(pagina: string) {
    let contexto: NavigationExtras = { 
        state: {
            usuario: this.usuario;
        } 
    }
    this._router.navigate([pagina]);
}
```

Lo que hicimos all√≠ es b√°sicamente decir que el atributo state de nuestra variable tipo NavigationExtras, tiene almacenado a nuestro usuario (variable `this.usuario`). Esto nos servir√° para que a la hora de llegar a la otra p√°gina, esta pueda recibir los datos correctamente üò∏.

Lo √∫ltimo que debemos hacer en nuestro archivo `login.page.ts`, para que esto funcione es agregarle el contexto como par√°metro a la funci√≥n `navigate`.

Nuestra funci√≥n deber√≠a de quedar as√≠:

```typescript
navigateTo(pagina: string) {
    let contexto: NavigationExtras = { 
        state: {
            usuario: this.usuario,
        } 
    }
    this._router.navigate([pagina], contexto);
}
```

Para terminar con esta parte, utilizamos la funci√≥n en nuestra funci√≥n `onSubmit()` que creamos en la parte anterior de la gu√≠a. Quedar√≠a tal que as√≠:

```typescript
onSubmit() {
	if (this.usuario.email == 'alwexis@github.com' && this.usuario.password == '12345') {
		console.log('¬°El usuario ' + this.usuario.email + ' ha ingresado correctamente!');
		this.navigateTo('home');
	} else {
		console.log('¬øHas ingresado bien las credenciales?')
    }
  }
```

&nbsp;

----

<h2 id="recibiendo_datos" align="center">üì• Recibiendo los datos</h2>

Para hacer esto, debemos dirigirnos al archivo `.page.ts` de la p√°gina la cual queremos hacer que reciba nuestros datos; en nuestro caso ser√≠a `home.page.ts`.

Antes que nada, definiremos la variable en la cual guardaremos los datos enviados desde la p√°gina login. En mi caso ser√° en la variable llamada `usuario`. Para hacerlo, s√≥lo escriban arriba del constructor `usuario;` üò∏

<details>
    <summary><b><u>üñºÔ∏è Ver imagen</u></b></summary>
    <img src="https://imgur.com/CZwfXRy.png">
</details>

&nbsp;

Lo que debemos hacer a continuaci√≥n, al igual que en la p√°gina anterior, ser√° importar componentes, en este caso ser√≠an `Router` y `ActivatedRoute`, con la siguiente l√≠nea: 

`import { ActivatedRoute, Router } from '@angular/router';`.

A continuaci√≥n, al igual que antes, debemos referenciar los componentes en nuestro constructor, el cual quedar√≠a de la siguiente forma:

```typescript
constructor(private _activeRoute: ActivatedRoute, private _router: Router) {    
}
```

Y dentro del constructor escribimos el siguiente c√≥digo:

```typescript
constructor(private _activeRoute: ActivatedRoute, private _router: Router) {
	this._activeRoute.queryParams.subscribe(() => {
		if (this._router.getCurrentNavigation().extras.state) {
			this.usuario = this._router.getCurrentNavigation().extras.state.usuario;
		}
    })
}
```

Para explicar el siguiente c√≥digo, lo har√© parte por parte, explicando funci√≥n por funci√≥n.

Comenzaremos con la primera; `this._activeRoute.queryParams.subscribe()`. Lo que hace esta funci√≥n del componente `ActivatedRoute`, es b√°sicamente permitirnos acceder a los datos que est√°n almacenados en la "consulta".

La siguiente; `this._router.getCurrentNavigation().extras.state`. Esta no es una funci√≥n como tal, es m√°s bien la forma a la que accedemos a los datos almacenados en el atributo `state` que vimos anteriormente.

Y por √∫ltimo `this._router.getCurrentNavigation().extras.state.usuario`. Es exactamente lo mismo de arriba, s√≥lo que refiriendose a un dato en espec√≠fico, en este caso el `usuario` que enviamos en el Login. Adem√°s, lo est√° asignando a la variable `this.usuario`.

<details>
    <summary><b><u>‚ö†Ô∏è Informaci√≥n extra</u></b></summary>
    <p>
		Probablemente, en caso de que no sepan mucho a√∫n de Javascript se pregunten qu√© es aquello que se ve as√≠ <code>() => {}</code> en la primera funci√≥n que explicamos.
		A esto se le llama funci√≥n de flecha, estas son an√≥nimas (osea que no se definen) y adem√°s pueden contener datos que son "enviados" por una variable en cuesti√≥n o una funci√≥n (como la de <code>subscribe()</code>). Esta, en comparaci√≥n a las funciones normales son bastante limitadas y se utilizan solo en ciertas ocasiones. Si quieres saber m√°s sobre ellas, te recomiendo ir a la p√°gina de <a target="_blank" href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Functions/Arrow_functions#:~:text=Una%20expresi√≥n%20de%20funci√≥n%20flecha,argumentos%20o%20palabras%20clave%20new.">mdn</a> la cual explica las <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Functions/Arrow_functions#:~:text=Una%20expresi√≥n%20de%20funci√≥n%20flecha,argumentos%20o%20palabras%20clave%20new." target="_blank">funciones flecha</a>, obviamente m√°s a detalle y mejor explayada üò∏
    </p>
</details>

&nbsp;

Y ya con todo esto, habremos recibido y almacenado en una variable los datos enviados desde la p√°gina login. Ahora para darles utilidad, lo que haremos ser√° mostrarla en la p√°gina principal üò∫

&nbsp;

----

<h2 id="mostrando_datos" align="center">ü™ß Mostrando los datos</h2>

Para esto nos dirigiremos rapidamente a nuestro archivo `home.page.html` y lo √∫nico que agregaremos ser√° la siguiente l√≠nea: `<span>Ha ingresado alguien con el correo {{usuario.email}}</span>`; esto dentro de la etiqueta `<ion-content>`.

¬øPor qu√© `usuario.email`? Porque nuestra variable se llama `usuario` y al valor al que queremos acceder es el llamado `email` (B√°sicamente la forma de acceder a un valor en un objeto).

Ahora nuestra p√°gina home quedar√≠a tal que as√≠:

<img src="https://imgur.com/YrwWRsN.png">

&nbsp;

----

<h1 align="center">üìÑ Para resumir...</h1>

Podemos navegar y enviar datos de una p√°gina a otra importando y utilizando los componentes `Router` y `NavigationExtras`. <sup>[Referencia](#enviar_datos_navegar)</sup>

Podemos recibir los datos enviados desde una p√°gina importando y utilizando los componentes `Router` y `ActivatedRoute`. <sup>[Referencia](#recibiendo_datos)</sup>

Podemos mostrar los datos (variables) guardados en nuestros archivos `.ts` en nuestras p√°ginas, referenciandolos con `{{nombrevariable}}`. [Referencia](#mostrando_datos)

&nbsp;

------

<h3 align="right"><b>‚û°Ô∏è Siguiente parte de la Gu√≠a</b>: <a href="https://github.com/Alwexis/Utilidades/blob/main/Guias/Ionic/3.%20Navegacion.md">Componentes üî©</a></h3>

