‚¨ÖÔ∏è **Parte anterior de la Gu√≠a**: **[Primeros Pasos üêæ](https://github.com/Alwexis/Utilidades/blob/main/Guias/Ionic/2.%20Navegacion.md)**

----

# üìã Formularios

Los formularios en Ionic se manejan de manera similar a como se maneja con cualquier otro framework de desarrollo web, siguiendo las etiquetas y atributos comunes de un formulario.

En Ionic hay dos formas de crear un formulario, este puede ser mediante el `HTML` de la p√°gina, o mediante un `Objeto` administrado desde el "backend". En este caso utilizaremos el primero, con HTML, ya que es m√°s r√°pido de hacer y sencillo de explicar; Quiz√° en un futuro se incluya ac√° la forma de hacerlo con un Objeto üò∏

&nbsp;

----

## üöÄ Comenzando

Lo que haremos hoy ser√° un formulario b√°sico de Login, el cual les podr√° dar una idea de como funciona y tambi√©n les servir√° como base para hacer otro tipo de formularios (registro, inventario, etc).

Entonces lo primero que haremos, ser√° retomar donde lo dejamos en la parte anterior de la gu√≠a, en nuestro editor de c√≥digo con la carpeta del proyecto abierta.

Antes que nada, crearemos una p√°gina nueva para hacer el login, y a esta misma la volveremos la principal. Para esto, debemos de ejecutar el siguiente comando: **`ionic g page pages/<Nombre de la P√°gina>`**, en nuestro caso ser√≠a, `ionic g page pages/login`.

**‚ö†Ô∏è El `pages/` es el "path" que tendr√° nuestra p√°gina, es una buena pr√°ctica mantener el orden en nuestro proyecto ;} ‚ö†Ô∏è**

&nbsp;

<details>
    <summary><b><u>üñºÔ∏è Resultado del comando</u></b></summary>
    <p>
        Cuando se ejecute el comando, el output (o resultado) deber√≠a ser el siguiente:
    </p>
    &nbsp;
    <img src="https://imgur.com/KLridtD.png">
</details>

&nbsp;

Y... Listo, nuestra p√°gina login se ha generado üò∏.

&nbsp;

----

## <a name="cambiando_pagina_principal">üîÉ Cambiando la p√°gina principal</a>

Ahora queremos que esta, sea la principal a mostrar una vez se ingrese a la aplicaci√≥n, para eso debemos ingresar al archivo **`app-routing.module.ts`**, que est√° dentro de las carpetas `src` y `app`.

Nuestro archivo tendr√≠a que verse de la siguiente forma:

<details>
    <summary><b><u>üñºÔ∏è Ver imagen</u></b></summary>
    <img src="https://imgur.com/kbIHX2r.png">
</details>

Lo que nos interesa cambiar a nosotros en este archivo, es aquello que hemos apuntado con la flecha roja en la imagen.

Debemos cambiar el valor de **`redirectTo`**, de `'home'` a `'login'`, que ser√≠a la p√°gina que queremos dejar como principal.

Nuestro archivo deber√≠a de verse as√≠:

<details>
    <summary><b><u>üñºÔ∏è Ver imagen</u></b></summary>
    <p>
        En caso de que quieras poner como p√°gina principal otra p√°gina, cambia el valor de <code>redirectTo</code> al valor que est√° en <code>path</code> como se vi√≥ arriba üò∏
    </p>
    &nbsp;
    <img src="https://imgur.com/WA5vg69.png">
</details>

&nbsp;

**‚ö†Ô∏è Para mantener las buenas practicas, moveremos la carpeta `'home'` que se gener√≥ cuando creamos nuestro proyecto, a la carpeta `'pages'`, simplemente la arrastramos y ya est√°. ‚ö†Ô∏è**

<details>
    <summary><b><u>üñºÔ∏è C√≥mo quedar√≠a nuestra carpeta 'app'</u></b></summary>
    <img src="https://imgur.com/BjR2kkK.png">
</details>

&nbsp;

----

## üìã Creando nuestro Formulario

Una vez hayamos generado nuestra p√°gina login y haberla asignado como la principal, abriremos el archivo `'login.page.html'`, ubicado en la carpeta `'login'`. Y comenzaremos a crear nuestro formulario.

Con lo primero que comenzaremos ser√° con la etiqueta `<form>`.

```HTML
<form #loginform="ngForm">
    
</form>
```

<details>
    <summary><b><u>üìù Info</u></b></summary>
    <b>‚ö†Ô∏è En caso de que hayas instalado la extensi√≥n <code>Ionic Snippets</code> en Visual Studio Code, con tan solo escribir <code>i-form</code> y apretar la tecla TAB, se generar√° un formulario ‚ö†Ô∏è</b>
</details>

El `#loginform="ngForm"` que se ve all√≠, quiere decir que el form identificado como `loginform` es del tipo o tiene la propiedad de `ngForm` (AngularForm), ya ver√°n en un futuro qu√© utilidad se le puede dar.

En ionic, por lo general los controles (inputs) de un formulario, se manejan dentro de una etiqueta llamada **`<ion-item>`**, esto debido a que Ionic lo adapta autom√°ticamente a como se deber√≠a de ver en un dispositivo m√≥vil.

Siguiendo este "est√°ndar", haremos el Form en base a ion-items.

```HTML
<form #loginform="ngForm">
    <ion-item>
    	<ion-label position="floating">Correo Electr√≥nico</ion-label>
    	<ion-input required type="email"></ion-input>
    </ion-item>
    <ion-item>
    	<ion-label position="floating">Contrase√±a</ion-label>
    	<ion-input required type="password"></ion-input>
    </ion-item>
  	<ion-button expand="block" fill="clear" shape="round" type="submit">
    	Ingresar
  	</ion-button>
</form>
```

As√≠ ir√≠a quedando nuestro Formulario, luego adjuntar√© una tabla explicando alguno de los atributos que se ven en los `input`, `label`, `button`, etc.

Como nosotros queremos hacer un formulario cuyo prop√≥sito sea logearse en la aplicaci√≥n, debemos obtener los datos de los inputs, esto lo haremos a√±adiendo el atributo `[(ngModel)]="variable"`, `#<nombre>` y `name="<nombre>"` a los elementos.

`[(ngModel)]="variable"`, quiere decir que nuestro input es un `AngularModel`, y lo que va a dentro es el lugar en el cual se guardar√°n los datos ingresados a el.

`#<nombre>`, al igual que con el formulario, quiere decir que el input podr√° ser identificado con lo que se escriba luego del `#`.`



&nbsp;

```html
<form #loginform="ngForm">
    <ion-item>
    	<ion-label position="floating">Correo Electr√≥nico</ion-label>
    	<ion-input [(ngModel)]="usuario.email" #email name="email" required type="email"></ion-input>
    </ion-item>
    <ion-item>
    	<ion-label position="floating">Contrase√±a</ion-label>
    	<ion-input [(ngModel)]="usuario.password" #contrasena name="contrasena" required type="password"></ion-input>
    </ion-item>
  	<ion-button expand="block" fill="clear" shape="round" type="submit">
    	Ingresar
  	</ion-button>
</form>
```

As√≠ quedar√≠a nuestro formulario. Si lo escribimos en nuestro archivo `login.page.html` y guardamos, lo m√°s probable es que nos lance un error, y eso es porque le asignamos el atributo `ngModel` a los inputs, pero no tenemos un lugar en donde guardar los datos que se ingresen all√≠. Por lo que ahora, tendremos que ir a nuestro archivo `login.page.ts` a definir nuestras variables.

&nbsp;

----

## üìù A√±adiendo un modelo a nuestro Formulario

Retomando el paso anterior, ya en nuestro archivo `login.page.ts`, lo que haremos ser√° dirigirnos a dentro de la clase, y entre la definici√≥n de la clase y el constructor, nosotros crearemos la variable que guardar√° los datos de los inputs como se ver√° en la imagen.

<details>
    <summary><b><u>üñºÔ∏è Ver imagen</u></b></summary>
    <img src="https://imgur.com/MF3FQ89.png">
</details>

La variable que creamos es de tipo `Object`, y lo que almacenamos dentro de ella son dos atributos del objeto, en este caso un `email` y una `password`, ambas de tipo `string`.

Ahora que tenemos donde guardar nuestros datos, lo que haremos es volver a nuestro HTML y agregar un evento de `submit` a nuestro formulario, para as√≠ obtener resultados üò∏

Para hacer esto, vamos a la etiqueta `<form>` y dentro de ella le agregamos `(ngSubmit)="onSubmit()"`. Esto quiere decir que cuando el formulario se envie, se ejecutar√° la funci√≥n `onSubmit()`

<details>
    <summary><b><u>‚ö†Ô∏è Informaci√≥n</u></b></summary>
    La funci√≥n puede ser cualquiera, de hecho, un formulario puede hasta no tener un evento submit, dependiendo de lo que queramos hacer üò∏
</details>

&nbsp;

Nuestro formulario quedar√≠a tal que as√≠:

```html
<form #loginform="ngForm" (ngSubmit)="onSubmit()">
  <ion-item>
    <ion-label position="floating">Correo Electr√≥nico</ion-label>
    <ion-input [(ngModel)]="usuario.email" #email name="email" required type="email"></ion-input>
  </ion-item>
  <ion-item>
    <ion-label position="floating">Contrase√±a</ion-label>
    <ion-input [(ngModel)]="usuario.password" #contrasena name="contrasena" required type="password"></ion-input>
  </ion-item>
  <ion-button expand="block" fill="clear" shape="round" type="submit">
    Ingresar
  </ion-button>
</form>
```

&nbsp;

----

## üíª Creando nuestra funci√≥n submit y obteniendo datos

Para crear nuestra funci√≥n, tendremos que volver a nuestro archivo `home.page.ts` y abajo de la funci√≥n llamada `ngOnInit()`, escribiremos nuestra funci√≥n submit.

```typescript
onSubmit() {
    // Aqu√≠ escribiremos nuestra funci√≥n.
}
```

Lo que haremos dentro de la funci√≥n, ser√° una condici√≥n b√°sica para saber si el correo ingresado y la contrase√±a corresponden con datos inventados por nosotros.

```typescript
onSubmit() {
	if (this.usuario.email == 'alwexis@github.com' && this.usuario.password == '12345') {
		console.log('¬°El usuario ' + this.usuario.email + ' ha ingresado correctamente!');
	} else {
		console.log('¬øHas ingresado bien las credenciales?')
	}
}
```

Y as√≠ ya estar√≠a nuestro formulario de login creado y funcionando üò∏. Ahora mejoraremos un poco el estilo de nuestro formulario, haciendo que, por ejemplo al ser inv√°lido se deshabilite el bot√≥n de ingresar, etc.

Esto √∫ltimo lo haremos de la siguiente manera, volviendo a nuestro HTML, nos dirigiremos a nuestro bot√≥n de submit y le agregaremos lo siguiente: `[disabled]="loginform.invalid"`. La propiedad `[disabled]` nos sirve para deshabilitar un elemento de nuestra p√°gina, siempre y cuando cumpla con la condici√≥n que ingresamos dentro de las comillas; en este caso, que nuestro formulario sea invalido.

Tambi√©n a√±adiremos una clase a nuestros tags `<ion-item>` para a√±adirles estilo mediante nuestro archivo `login.page.scss`.

Nuestro formulario quedar√≠a as√≠:

```html
<form #loginform="ngForm" (ngSubmit)="onSubmit()">
  <ion-item class="loginform-item">
    <ion-label position="floating">Correo Electr√≥nico</ion-label>
    <ion-input [(ngModel)]="usuario.email" #email name="email" required type="email"></ion-input>
  </ion-item>
  <ion-item class="loginform-item">
    <ion-label position="floating">Contrase√±a</ion-label>
    <ion-input [(ngModel)]="usuario.password" #contrasena name="contrasena" required type="password"></ion-input>
  </ion-item>
  <ion-button [disabled]="loginform.invalid" expand="block" fill="clear" shape="round" type="submit">
    Ingresar
  </ion-button>
</form>
```

&nbsp;

----

## üé® A√±adiendo estilo a nuestro Formulario

Ya habiendo agregado las clases a nuestros `<ion-item>` y ya estando en nuestro archivo `login.page.scss`, mejoraremos el estilo de nuestro formulario, yo, lo dejar√© como el c√≥digo que adjuntar√© abajo.

```scss
.loginform-item {
    margin: 2vh;
    /* Aplico margen para que los <ion-item> est√©n separados los unos de los otros. */
}

[ng-reflect-disabled=true] {
    color: rgb(247, 73, 73);
    border: 1px solid;
    /* Le cambio el color a rojo a aquellos elementos que tengan el atributo ng-reflect-disabled con el valor true */
}

[ng-reflect-disabled=false] {
    color: rgb(136, 229, 136);
    border: 1px solid;
    /* Lo mismo de arriba, pero con false y color verde */
}
```

&nbsp;

En angular existe un atributo llamado `ng-reflect-disabled`, el cual contiene un valor booleano, Angular utiliza esto para definir si un elemento de nuestra p√°gina est√° deshabilitado o no, aprovechando este atributo lo utilizamos para cambiar el color.

Y para terminar, nuestro formulario quedar√≠a tal que as√≠:

<details>
    <summary><b><u>üñºÔ∏è Ver imagen</u></b></summary>
    <a href="https://i.imgur.com/LAGyvU4.mp4" target="_blank">
        <img src="https://imgur.com/OtGpNlh.png">
    </a>
</details>

&nbsp;

----

## üéì Tabla de contenido

<details>
    <summary><b><u>Abrir tabla de contenido</u></b></summary>
    <table>
        <tr>
            <th>Elemento</th>
            <th>Valores</th>
            <th>Descripcion</th>
        </tr>
        <tr>
            <td><code>#form="ngForm"</code></td>
            <td>ngForm</td>
            <td>Sirve para identificar un formulario y definir que es un AngularForm</td>
        </tr>
        <tr>
            <td><code>ion-item</code></td>
            <td>N/A</td>
            <td>Funciona como un 'div'/'section', y se utiliza para varias cosas, en este caso lo utilizamos para nuestro formulario, siguiendo las buenas praticas</td>
        </tr>
        <tr>
            <td><code>[(ngModel)]=""</code></td>
            <td>Variable</td>
            <td>Funciona para definir en qu√© variable se almacenar√° el dato ingresado en el input</td>
        </tr>
        <tr>
            <td><code>(ngSubmit)=""</code></td>
            <td>Funcion</td>
            <td>Funciona para definir qu√© funci√≥n se ejecutar√° cuando se envie un formulario. Esto es un evento.</td>
        </tr>
        <tr>
            <td><code>[disabled]=""</code></td>
            <td>Condici√≥n</td>
            <td>Funciona deshabilitar un elemento siempre y cuando la condici√≥n de dentro sea verdadera.</td>
        </tr>
        <tr>
            <td><code>[atributo=valor]</code></td>
            <td>Cualquier valor</td>
            <td>Es un selector de <b><u>CSS</u></b> el cual nos permite modificar un elemento en base a alg√∫n atributo que tenga. Por ejemplo <code>[ng-reflect-disabled=true]</code>. Ser√≠a el atributo <code>ng-reflect-disabled</code> al que nos referimos.</td>
        </tr>
    </table>
</details>

&nbsp;

----

# üìÑ Para resumir...

Podemos generar p√°ginas nuevas utilizando el comando **`ionic g page pages/<Nombre de la P√°gina>`** y es una buena practica generarlas en una carpeta que se llame `pages`. Igual con lo dem√°s.

Podemos modificar la p√°gina principal de nuestra aplicaci√≥n ingresando al archivo `app-routing.module.ts` y cambiando el valor cuyo atributo `path` est√© vac√≠o. [Referencia](#cambiando_pagina_principal)

&nbsp;

------

## ‚û°Ô∏è **Siguiente parte de la Gu√≠a**: **[Navegaci√≥n üö£](https://github.com/Alwexis/Utilidades/blob/main/Guias/Ionic/3.%20Navegacion.md)**
